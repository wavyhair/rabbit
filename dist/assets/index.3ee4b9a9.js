import{d as x,v as N,x as L,y as T,o as a,c as l,m as w,z as P,f as r,e,A as j,F as k,i as B,B as G,_ as I,q as V,r as b,t as h,k as v,l as D,p as z,j as O,b as H,a as R,C as U,D as q,g as X,u as J,w as Y,s as K,h as E,n as M}from"./index.140912a8.js";import{G as Q}from"./goods-item.7129d994.js";const W={class:"goods-image"},Z=["src"],ee={class:"small"},se=["onMouseenter"],te=["src"],oe=x({name:"GoodsImage"}),ne=x({...oe,props:{images:null},setup(n){const _=n,u=100,s=2,i=400-200,p=N(0),m=N(null),{isOutside:g,elementX:y,elementY:$}=L(m),c=T(()=>{let d=y.value-u,o=$.value-u;return d<=0&&(d=0),d>i&&(d=i),o<=0&&(o=0),o>i&&(o=i),{x:d,y:o}});return(d,o)=>(a(),l("div",W,[w(e("div",{class:"cerlarge",style:j([{backgroundImage:`url(${_.images[p.value]})`},{backgroundPosition:`${-r(c).x*s}px
            ${-r(c).y*s}px`}])},null,4),[[P,!r(g)]]),e("div",{class:"middle",ref_key:"target",ref:m},[w(e("div",{class:"layer",style:j({left:r(c).x+"px",top:r(c).y+"px"})},null,4),[[P,!r(g)]]),e("img",{src:_.images[p.value],alt:""},null,8,Z)],512),e("ul",ee,[(a(!0),l(k,null,B(_.images,(t,f)=>(a(),l("li",{key:t,class:G({active:p.value===f}),onMouseenter:S=>p.value=f},[e("img",{src:t,alt:""},null,8,te)],42,se))),128))])]))}});const ae=I(ne,[["__scopeId","data-v-9456c3c7"]]);const ce={},de={class:"goods-sales"},le=V('<li data-v-3c25e281><p data-v-3c25e281>\u9500\u91CF\u4EBA\u6C14</p><p data-v-3c25e281>200+</p><p data-v-3c25e281><i class="iconfont icon-task-filling" data-v-3c25e281></i>\u9500\u91CF\u4EBA\u6C14</p></li><li data-v-3c25e281><p data-v-3c25e281>\u5546\u54C1\u8BC4\u4EF7</p><p data-v-3c25e281>400+</p><p data-v-3c25e281><i class="iconfont icon-comment-filling" data-v-3c25e281></i>\u67E5\u770B\u8BC4\u4EF7</p></li><li data-v-3c25e281><p data-v-3c25e281>\u6536\u85CF\u4EBA\u6C14</p><p data-v-3c25e281>600+</p><p data-v-3c25e281><i class="iconfont icon-favorite-filling" data-v-3c25e281></i>\u6536\u85CF\u5546\u54C1</p></li><li data-v-3c25e281><p data-v-3c25e281>\u54C1\u724C\u4FE1\u606F</p><p data-v-3c25e281>\u82CF\u5B81\u7535\u5668</p><p data-v-3c25e281><i class="iconfont icon-dynamic-filling" data-v-3c25e281></i>\u54C1\u724C\u4E3B\u9875</p></li>',4),ue=[le];function ie(n,_){return a(),l("ul",de,ue)}const _e=I(ce,[["render",ie],["__scopeId","data-v-3c25e281"]]),A=n=>(z("data-v-2d7c25a6"),n=n(),O(),n),re={class:"g-name"},pe={class:"g-desc"},ge={class:"g-price"},ve={class:"g-service"},me=A(()=>e("dl",null,[e("dt",null,"\u4FC3\u9500"),e("dd",null,"12\u6708\u597D\u7269\u653E\u9001\uFF0CApp\u9886\u5238\u8D2D\u4E70\u76F4\u964D120\u5143")],-1)),fe=A(()=>e("dt",null,"\u914D\u9001",-1)),he=D(" \u81F3"),ye=A(()=>e("dl",null,[e("dt",null,"\u670D\u52A1"),e("dd",null,[e("span",null,"\u65E0\u5FE7\u9000\u8D27"),e("span",null,"\u5FEB\u901F\u9000\u6B3E"),e("span",null,"\u514D\u8D39\u5305\u90AE"),e("a",{href:"javascript:;"},"\u4E86\u89E3\u8BE6\u60C5")])],-1)),xe=x({name:"GoodName"}),$e=x({...xe,props:{goods:null},setup(n){const _=N("\u9655\u897F\u7701 \u54B8\u9633\u5E02 \u6CFE\u9633\u53BF"),u=s=>{_.value=s.provinceName+""+s.cityName+s.countyName};return(s,i)=>{const p=b("XtxCity");return a(),l(k,null,[e("p",re,h(n.goods.name),1),e("p",pe,h(n.goods.desc),1),e("p",ge,[e("span",null,h(n.goods.price),1),e("span",null,h(n.goods.oldPrice),1)]),e("div",ve,[me,e("dl",null,[fe,e("dd",null,[he,v(p,{"user-address":_.value,onChangeCity:u},null,8,["user-address"])])]),ye])],64)}}});const ke=I($e,[["__scopeId","data-v-2d7c25a6"]]);function Se(n){const _=[],u=2**n.length;for(let s=0;s<u;s+=1){const i=[];for(let p=0;p<n.length;p+=1)s&1<<p&&i.push(n[p]);_.push(i)}return _}const Ce={class:"goods-sku"},Ie=["src","title","onClick"],Ee=["onClick"],be=x({name:"GoodsSku"}),De=x({...be,props:{goods:null,skuId:null},emits:["selChange"],setup(n,{emit:_}){const u=n,s="+",i=(c,d)=>{if(d.disabled)return;d.selected?d.selected=!1:(c.values.forEach(t=>t.selected=!1),d.selected=!0),m();const o=g().filter(t=>t);if(o.length===u.goods.specs.length){const t=o.join(s),f=$[t][0];_("selChange",f)}},p=()=>{const c={};return u.goods.skus.filter(o=>o.inventory).forEach(o=>{const t=o.specs.map(S=>S.valueName);Se(t).forEach(S=>{const C=S.join(s);c[C]?c[C].push(o.id):c[C]=[o.id]})}),c},m=()=>{const c=g();u.goods.specs.forEach((d,o)=>{d.values.forEach(t=>{const f=[...c];f[o]=t.name,f.filter(C=>C).join(s)in $?t.disabled=!1:t.disabled=!0})})},g=()=>{const c=[];return u.goods.specs.forEach((d,o)=>{const t=d.values.find(f=>f.selected);c[o]=t?t.name:""}),c},y=()=>{var d;if(!u.skuId)return;const c=(d=u.goods.skus.find(o=>o.id===u.skuId))==null?void 0:d.specs;!c||u.goods.specs.forEach((o,t)=>{const f=c[t].valueName,S=o.values.find(C=>C.name===f);S.selected=!0})},$=p();return y(),m(),(c,d)=>(a(),l("div",Ce,[(a(!0),l(k,null,B(n.goods.specs,o=>(a(),l("dl",{key:o.name},[e("dt",null,h(o.name),1),e("dd",null,[(a(!0),l(k,null,B(o.values,t=>(a(),l(k,{key:t.name},[t.picture?(a(),l("img",{key:0,class:G({selected:t.selected,disabled:t.disabled}),src:t.picture,title:t.name,alt:"",onClick:f=>i(o,t)},null,10,Ie)):(a(),l("span",{key:1,class:G({selected:t.selected,disabled:t.disabled}),onClick:f=>i(o,t)},h(t.name),11,Ee))],64))),128))])]))),128))]))}});const Be=I(De,[["__scopeId","data-v-3ac363b4"]]),Ne=n=>(z("data-v-e90031a9"),n=n(),O(),n),Fe={class:"goods-tabs"},we=Ne(()=>e("nav",null,[e("a",null,"\u5546\u54C1\u8BE6\u60C5")],-1)),Ge={class:"goods-detail"},Xe={class:"attrs"},Ae={class:"dt"},Pe={class:"dd"},je=x({__name:"goods-detali",props:{goods:{type:Object,default:()=>({})}},setup(n){return(_,u)=>{const s=H("lazy");return a(),l("div",Fe,[we,e("div",Ge,[e("ul",Xe,[(a(!0),l(k,null,B(n.goods.details.properties,i=>(a(),l("li",{key:i.value},[e("span",Ae,h(i.name),1),e("span",Pe,h(i.value),1)]))),128))]),(a(!0),l(k,null,B(n.goods.details.pictures,i=>w((a(),l("img",{key:i,alt:""})),[[s,i]])),128))])])}}});const Me=I(je,[["__scopeId","data-v-e90031a9"]]),ze={class:"goods-hot"},Oe={class:"goods-list"},Re=x({__name:"goods-hot",props:{type:{type:Number,default:1}},setup(n){const _=n,u={1:"24\u5C0F\u65F6\u70ED\u9500\u699C",2:"\u5468\u70ED\u9500\u699C",3:"\u603B\u70ED\u9500\u699C"},s="/goods/hot",p=R().params.id,m=N([]);return U(async()=>{const g=await q.get(s,{params:{id:p,type:_.type}});m.value=g.data.result}),(g,y)=>(a(),l("div",ze,[e("h3",null,h(u[_.type]),1),e("div",Oe,[(a(!0),l(k,null,B(m.value,($,c)=>(a(),X(Q,{goods:$,key:c},null,8,["goods"]))),128))])]))}});const F=I(Re,[["__scopeId","data-v-91be498c"]]),Le={class:"xtx-goods-page"},Te={class:"container"},Ve=D("\u9996\u9875"),He={key:2,class:"goods-info"},Ue={class:"media"},qe={class:"spec"},Je=D("\u52A0\u5165\u8D2D\u7269\u8F66"),Ye={key:3,class:"goods-footer"},Ke={class:"goods-article"},Qe={class:"goods-tabs"},We={class:"goods-aside"},Ze=x({name:"Goods"}),es=x({...Ze,setup(n){const{goods:_}=J(),u=R();Y(()=>{const m=u.params.id;u.fullPath===`/product/${m}`&&(_.$reset(),_.getGoodsInfo(m))});const{info:s}=K(_),i=m=>{const g=s.value.skus.find(y=>y.id===m);g&&(s.value.inventory=g.inventory,s.value.price=g.price,s.value.oldPrice=g.oldPrice)},p=N(5);return(m,g)=>{const y=b("XtxBreadItem"),$=b("XtxBread"),c=b("XtxSkeleton"),d=b("XtxNumber"),o=b("XtxButton");return a(),l("div",Le,[e("div",Te,[r(s).categories?(a(),X($,{key:0},{default:E(()=>[v(y,{to:"/"},{default:E(()=>[Ve]),_:1}),v(y,{to:`/category/${r(s).categories[1].id}`},{default:E(()=>[D(h(r(s).categories[1].name),1)]),_:1},8,["to"]),v(y,{to:`/category/sub/${r(s).categories[0].id}`},{default:E(()=>[D(h(r(s).categories[0].name),1)]),_:1},8,["to"]),v(y,null,{default:E(()=>[D(h(r(s).name),1)]),_:1})]),_:1})):(a(),X(c,{key:1,fade:"",animated:"",bg:"#515151",width:300,height:24})),r(s).id?(a(),l("div",He,[e("div",Ue,[v(ae,{images:r(s).mainPictures},null,8,["images"]),v(_e)]),e("div",qe,[v(ke,{goods:r(s)},null,8,["goods"]),v(Be,{goods:r(s),onSelChange:i},null,8,["goods"]),v(d,{count:p.value,"onUpdate:count":g[0]||(g[0]=t=>p.value=t),max:r(s).inventory,showLabel:""},null,8,["count","max"]),v(o,{class:"xtx_btn",type:"primary"},{default:E(()=>[Je]),_:1})])])):M("",!0),r(s).id?(a(),l("div",Ye,[e("div",Ke,[e("div",Qe,[v(Me,{goods:r(s)},null,8,["goods"])])]),e("div",We,[v(F,{type:1}),v(F,{type:2}),v(F,{type:3})])])):M("",!0)])])}}});const os=I(es,[["__scopeId","data-v-85571219"]]);export{os as default};
