import{d as k,v as b,x as L,y as V,o as l,c as u,m as w,z as A,f as p,e as s,A as M,F as C,i as B,B as G,_ as S,q as H,r as F,t as h,k as m,l as D,p as O,j as R,b as U,a as T,C as q,D as J,g as P,u as Y,w as K,s as Q,h as I,n as j,M as z,E as W,G as Z}from"./index.1c068c2f.js";import{G as ee}from"./goods-item.ffdd8f97.js";const se={class:"goods-image"},te=["src"],oe={class:"small"},ne=["onMouseenter"],ae=["src"],ce=k({name:"GoodsImage"}),le=k({...ce,props:{images:null},setup(c){const i=c,_=100,d=2,e=400-200,r=b(0),y=b(null),{isOutside:f,elementX:E,elementY:v}=L(y),t=V(()=>{let n=E.value-_,a=v.value-_;return n<=0&&(n=0),n>e&&(n=e),a<=0&&(a=0),a>e&&(a=e),{x:n,y:a}});return(n,a)=>(l(),u("div",se,[w(s("div",{class:"cerlarge",style:M([{backgroundImage:`url(${i.images[r.value]})`},{backgroundPosition:`${-p(t).x*d}px
            ${-p(t).y*d}px`}])},null,4),[[A,!p(f)]]),s("div",{class:"middle",ref_key:"target",ref:y},[w(s("div",{class:"layer",style:M({left:p(t).x+"px",top:p(t).y+"px"})},null,4),[[A,!p(f)]]),s("img",{src:i.images[r.value],alt:""},null,8,te)],512),s("ul",oe,[(l(!0),u(C,null,B(i.images,(o,g)=>(l(),u("li",{key:o,class:G({active:r.value===g}),onMouseenter:x=>r.value=g},[s("img",{src:o,alt:""},null,8,ae)],42,ne))),128))])]))}});const de=S(le,[["__scopeId","data-v-286f2b55"]]);const ue={},ie={class:"goods-sales"},_e=H('<li data-v-3c25e281><p data-v-3c25e281>\u9500\u91CF\u4EBA\u6C14</p><p data-v-3c25e281>200+</p><p data-v-3c25e281><i class="iconfont icon-task-filling" data-v-3c25e281></i>\u9500\u91CF\u4EBA\u6C14</p></li><li data-v-3c25e281><p data-v-3c25e281>\u5546\u54C1\u8BC4\u4EF7</p><p data-v-3c25e281>400+</p><p data-v-3c25e281><i class="iconfont icon-comment-filling" data-v-3c25e281></i>\u67E5\u770B\u8BC4\u4EF7</p></li><li data-v-3c25e281><p data-v-3c25e281>\u6536\u85CF\u4EBA\u6C14</p><p data-v-3c25e281>600+</p><p data-v-3c25e281><i class="iconfont icon-favorite-filling" data-v-3c25e281></i>\u6536\u85CF\u5546\u54C1</p></li><li data-v-3c25e281><p data-v-3c25e281>\u54C1\u724C\u4FE1\u606F</p><p data-v-3c25e281>\u82CF\u5B81\u7535\u5668</p><p data-v-3c25e281><i class="iconfont icon-dynamic-filling" data-v-3c25e281></i>\u54C1\u724C\u4E3B\u9875</p></li>',4),re=[_e];function pe(c,i){return l(),u("ul",ie,re)}const ve=S(ue,[["render",pe],["__scopeId","data-v-3c25e281"]]),X=c=>(O("data-v-282054a2"),c=c(),R(),c),ge={class:"g-name"},me={class:"g-desc"},fe={class:"g-price"},he={class:"g-service"},ye=X(()=>s("dl",null,[s("dt",null,"\u4FC3\u9500"),s("dd",null,"12\u6708\u597D\u7269\u653E\u9001\uFF0CApp\u9886\u5238\u8D2D\u4E70\u76F4\u964D120\u5143")],-1)),ke=X(()=>s("dt",null,"\u914D\u9001",-1)),xe=D(" \u81F3"),$e=X(()=>s("dl",null,[s("dt",null,"\u670D\u52A1"),s("dd",null,[s("span",null,"\u65E0\u5FE7\u9000\u8D27"),s("span",null,"\u5FEB\u901F\u9000\u6B3E"),s("span",null,"\u514D\u8D39\u5305\u90AE"),s("a",{href:"javascript:;"},"\u4E86\u89E3\u8BE6\u60C5")])],-1)),Ce=k({name:"GoodName"}),Se=k({...Ce,props:{goods:null},setup(c){const i=b("\u9655\u897F\u7701 \u54B8\u9633\u5E02 \u6CFE\u9633\u53BF"),_=d=>{i.value=d.provinceName+""+d.cityName+d.countyName};return(d,e)=>{const r=F("XtxCity");return l(),u(C,null,[s("p",ge,h(c.goods.name),1),s("p",me,h(c.goods.desc),1),s("p",fe,[s("span",null,h(c.goods.price),1),s("span",null,h(c.goods.oldPrice),1)]),s("div",he,[ye,s("dl",null,[ke,s("dd",null,[xe,m(r,{"user-address":i.value,onChangeCity:_},null,8,["user-address"])])]),$e])],64)}}});const Ee=S(Se,[["__scopeId","data-v-282054a2"]]);function Ie(c){const i=[],_=2**c.length;for(let d=0;d<_;d+=1){const e=[];for(let r=0;r<c.length;r+=1)d&1<<r&&e.push(c[r]);i.push(e)}return i}const De={class:"goods-sku"},be=["src","title","onClick"],Be=["onClick"],Fe=k({name:"GoodsSku"}),Ne=k({...Fe,props:{goods:null,skuId:null},emits:["selChange"],setup(c,{emit:i}){const _=c,d="+",e=(t,n)=>{if(n.disabled)return;n.selected?n.selected=!1:(t.values.forEach(o=>o.selected=!1),n.selected=!0),y();const a=f().filter(o=>o);if(a.length===_.goods.specs.length){const o=a.join(d),g=v[o][0];i("selChange",g)}else i("selChange","")},r=()=>{const t={};return _.goods.skus.filter(a=>a.inventory).forEach(a=>{const o=a.specs.map(x=>x.valueName);Ie(o).forEach(x=>{const $=x.join(d);t[$]?t[$].push(a.id):t[$]=[a.id]})}),t},y=()=>{const t=f();_.goods.specs.forEach((n,a)=>{n.values.forEach(o=>{const g=[...t];g[a]=o.name,g.filter($=>$).join(d)in v?o.disabled=!1:o.disabled=!0})})},f=()=>{const t=[];return _.goods.specs.forEach((n,a)=>{const o=n.values.find(g=>g.selected);t[a]=o?o.name:""}),t},E=()=>{var n;if(!_.skuId)return;const t=(n=_.goods.skus.find(a=>a.id===_.skuId))==null?void 0:n.specs;!t||_.goods.specs.forEach((a,o)=>{const g=t[o].valueName,x=a.values.find($=>$.name===g);x.selected=!0})},v=r();return E(),y(),(t,n)=>(l(),u("div",De,[(l(!0),u(C,null,B(c.goods.specs,a=>(l(),u("dl",{key:a.name},[s("dt",null,h(a.name),1),s("dd",null,[(l(!0),u(C,null,B(a.values,o=>(l(),u(C,{key:o.name},[o.picture?(l(),u("img",{key:0,class:G({selected:o.selected,disabled:o.disabled}),src:o.picture,title:o.name,alt:"",onClick:g=>e(a,o)},null,10,be)):(l(),u("span",{key:1,class:G({selected:o.selected,disabled:o.disabled}),onClick:g=>e(a,o)},h(o.name),11,Be))],64))),128))])]))),128))]))}});const we=S(Ne,[["__scopeId","data-v-f5b556e5"]]),Ge=c=>(O("data-v-e90031a9"),c=c(),R(),c),Pe={class:"goods-tabs"},Xe=Ge(()=>s("nav",null,[s("a",null,"\u5546\u54C1\u8BE6\u60C5")],-1)),Ae={class:"goods-detail"},Me={class:"attrs"},je={class:"dt"},ze={class:"dd"},Oe=k({__name:"goods-detali",props:{goods:{type:Object,default:()=>({})}},setup(c){return(i,_)=>{const d=U("lazy");return l(),u("div",Pe,[Xe,s("div",Ae,[s("ul",Me,[(l(!0),u(C,null,B(c.goods.details.properties,e=>(l(),u("li",{key:e.value},[s("span",je,h(e.name),1),s("span",ze,h(e.value),1)]))),128))]),(l(!0),u(C,null,B(c.goods.details.pictures,e=>w((l(),u("img",{key:e,alt:""})),[[d,e]])),128))])])}}});const Re=S(Oe,[["__scopeId","data-v-e90031a9"]]),Te={class:"goods-hot"},Le={class:"goods-list"},Ve=k({__name:"goods-hot",props:{type:{type:Number,default:1}},setup(c){const i=c,_={1:"24\u5C0F\u65F6\u70ED\u9500\u699C",2:"\u5468\u70ED\u9500\u699C",3:"\u603B\u70ED\u9500\u699C"},d="/goods/hot",r=T().params.id,y=b([]);return q(async()=>{const f=await J.get(d,{params:{id:r,type:i.type}});y.value=f.data.result}),(f,E)=>(l(),u("div",Te,[s("h3",null,h(_[i.type]),1),s("div",Le,[(l(!0),u(C,null,B(y.value,(v,t)=>(l(),P(ee,{goods:v,key:t},null,8,["goods"]))),128))])]))}});const N=S(Ve,[["__scopeId","data-v-c3a78982"]]),He={class:"xtx-goods-page"},Ue={class:"container"},qe=D("\u9996\u9875"),Je={key:2,class:"goods-info"},Ye={class:"media"},Ke={class:"spec"},Qe=D("\u52A0\u5165\u8D2D\u7269\u8F66"),We={key:3,class:"goods-footer"},Ze={class:"goods-article"},es={class:"goods-tabs"},ss={class:"goods-aside"},ts=k({name:"Goods"}),os=k({...ts,setup(c){const{goods:i,cart:_}=Y(),d=T();K(()=>{const v=d.params.id;d.fullPath===`/product/${v}`&&(i.$reset(),i.getGoodsInfo(v))});const{info:e}=Q(i),r=b(""),y=v=>{r.value=v;const t=e.value.skus.find(n=>n.id===v);t&&(e.value.inventory=t.inventory,e.value.price=t.price,e.value.oldPrice=t.oldPrice)},f=b(1),E=()=>{if(!r.value)return z.warning("\u8BF7\u9009\u62E9\u5B8C\u6574\u89C4\u683C");const v=e.value.skus.find(n=>n.id===r.value);let t;v&&(t=v.specs.map(n=>n.name+":"+n.valueName).join(" ")),_.addCart({id:e.value.id,name:e.value.name,picture:e.value.mainPictures[0],price:e.value.price,count:f.value,skuId:r.value,attrsText:t,selected:!0,nowPrice:e.value.price,stock:e.value.inventory,isEffective:!0}),z.success("\u52A0\u5165\u8D2D\u7269\u8F66\u6210\u529F")};return(v,t)=>{const n=F("XtxBreadItem"),a=F("XtxBread"),o=F("XtxSkeleton"),g=W,x=Z;return l(),u("div",He,[s("div",Ue,[p(e).categories?(l(),P(a,{key:0},{default:I(()=>[m(n,{to:"/"},{default:I(()=>[qe]),_:1}),m(n,{to:`/category/${p(e).categories[1].id}`},{default:I(()=>[D(h(p(e).categories[1].name),1)]),_:1},8,["to"]),m(n,{to:`/category/sub/${p(e).categories[0].id}`},{default:I(()=>[D(h(p(e).categories[0].name),1)]),_:1},8,["to"]),m(n,null,{default:I(()=>[D(h(p(e).name),1)]),_:1})]),_:1})):(l(),P(o,{key:1,fade:"",animated:"",bg:"#515151",width:300,height:24})),p(e).id?(l(),u("div",Je,[s("div",Ye,[m(de,{images:p(e).mainPictures},null,8,["images"]),m(ve)]),s("div",Ke,[m(Ee,{goods:p(e)},null,8,["goods"]),m(we,{goods:p(e),onSelChange:y},null,8,["goods"]),m(g,{count:f.value,"onUpdate:count":t[0]||(t[0]=$=>f.value=$),max:p(e).inventory,showLabel:""},null,8,["count","max"]),m(x,{class:"xtx_btn",type:"primary",onClick:E},{default:I(()=>[Qe]),_:1})])])):j("",!0),p(e).id?(l(),u("div",We,[s("div",Ze,[s("div",es,[m(Re,{goods:p(e)},null,8,["goods"])])]),s("div",ss,[m(N,{type:1}),m(N,{type:2}),m(N,{type:3})])])):j("",!0)])])}}});const cs=S(os,[["__scopeId","data-v-c3b89260"]]);export{cs as default};
