import{d as x,v as B,x as T,y as V,o as l,c as u,m as w,z as M,f as p,e,A as P,F as C,i as F,B as G,_ as S,q as H,r as D,t as h,k as v,l as b,p as O,j as R,b as U,a as L,C as q,D as J,g as X,u as Y,w as K,s as Q,h as E,n as j,M as z}from"./index.76f9da78.js";import{G as W}from"./goods-item.4075c817.js";const Z={class:"goods-image"},ee=["src"],se={class:"small"},te=["onMouseenter"],oe=["src"],ne=x({name:"GoodsImage"}),ae=x({...ne,props:{images:null},setup(a){const i=a,_=100,d=2,s=400-200,r=B(0),y=B(null),{isOutside:f,elementX:I,elementY:m}=T(y),n=V(()=>{let c=I.value-_,o=m.value-_;return c<=0&&(c=0),c>s&&(c=s),o<=0&&(o=0),o>s&&(o=s),{x:c,y:o}});return(c,o)=>(l(),u("div",Z,[w(e("div",{class:"cerlarge",style:P([{backgroundImage:`url(${i.images[r.value]})`},{backgroundPosition:`${-p(n).x*d}px
            ${-p(n).y*d}px`}])},null,4),[[M,!p(f)]]),e("div",{class:"middle",ref_key:"target",ref:y},[w(e("div",{class:"layer",style:P({left:p(n).x+"px",top:p(n).y+"px"})},null,4),[[M,!p(f)]]),e("img",{src:i.images[r.value],alt:""},null,8,ee)],512),e("ul",se,[(l(!0),u(C,null,F(i.images,(t,g)=>(l(),u("li",{key:t,class:G({active:r.value===g}),onMouseenter:$=>r.value=g},[e("img",{src:t,alt:""},null,8,oe)],42,te))),128))])]))}});const ce=S(ae,[["__scopeId","data-v-9456c3c7"]]);const le={},de={class:"goods-sales"},ue=H('<li data-v-3c25e281><p data-v-3c25e281>\u9500\u91CF\u4EBA\u6C14</p><p data-v-3c25e281>200+</p><p data-v-3c25e281><i class="iconfont icon-task-filling" data-v-3c25e281></i>\u9500\u91CF\u4EBA\u6C14</p></li><li data-v-3c25e281><p data-v-3c25e281>\u5546\u54C1\u8BC4\u4EF7</p><p data-v-3c25e281>400+</p><p data-v-3c25e281><i class="iconfont icon-comment-filling" data-v-3c25e281></i>\u67E5\u770B\u8BC4\u4EF7</p></li><li data-v-3c25e281><p data-v-3c25e281>\u6536\u85CF\u4EBA\u6C14</p><p data-v-3c25e281>600+</p><p data-v-3c25e281><i class="iconfont icon-favorite-filling" data-v-3c25e281></i>\u6536\u85CF\u5546\u54C1</p></li><li data-v-3c25e281><p data-v-3c25e281>\u54C1\u724C\u4FE1\u606F</p><p data-v-3c25e281>\u82CF\u5B81\u7535\u5668</p><p data-v-3c25e281><i class="iconfont icon-dynamic-filling" data-v-3c25e281></i>\u54C1\u724C\u4E3B\u9875</p></li>',4),ie=[ue];function _e(a,i){return l(),u("ul",de,ie)}const re=S(le,[["render",_e],["__scopeId","data-v-3c25e281"]]),A=a=>(O("data-v-2d7c25a6"),a=a(),R(),a),pe={class:"g-name"},ge={class:"g-desc"},ve={class:"g-price"},me={class:"g-service"},fe=A(()=>e("dl",null,[e("dt",null,"\u4FC3\u9500"),e("dd",null,"12\u6708\u597D\u7269\u653E\u9001\uFF0CApp\u9886\u5238\u8D2D\u4E70\u76F4\u964D120\u5143")],-1)),he=A(()=>e("dt",null,"\u914D\u9001",-1)),ye=b(" \u81F3"),xe=A(()=>e("dl",null,[e("dt",null,"\u670D\u52A1"),e("dd",null,[e("span",null,"\u65E0\u5FE7\u9000\u8D27"),e("span",null,"\u5FEB\u901F\u9000\u6B3E"),e("span",null,"\u514D\u8D39\u5305\u90AE"),e("a",{href:"javascript:;"},"\u4E86\u89E3\u8BE6\u60C5")])],-1)),$e=x({name:"GoodName"}),ke=x({...$e,props:{goods:null},setup(a){const i=B("\u9655\u897F\u7701 \u54B8\u9633\u5E02 \u6CFE\u9633\u53BF"),_=d=>{i.value=d.provinceName+""+d.cityName+d.countyName};return(d,s)=>{const r=D("XtxCity");return l(),u(C,null,[e("p",pe,h(a.goods.name),1),e("p",ge,h(a.goods.desc),1),e("p",ve,[e("span",null,h(a.goods.price),1),e("span",null,h(a.goods.oldPrice),1)]),e("div",me,[fe,e("dl",null,[he,e("dd",null,[ye,v(r,{"user-address":i.value,onChangeCity:_},null,8,["user-address"])])]),xe])],64)}}});const Ce=S(ke,[["__scopeId","data-v-2d7c25a6"]]);function Se(a){const i=[],_=2**a.length;for(let d=0;d<_;d+=1){const s=[];for(let r=0;r<a.length;r+=1)d&1<<r&&s.push(a[r]);i.push(s)}return i}const Ie={class:"goods-sku"},Ee=["src","title","onClick"],De=["onClick"],be=x({name:"GoodsSku"}),Be=x({...be,props:{goods:null,skuId:null},emits:["selChange"],setup(a,{emit:i}){const _=a,d="+",s=(n,c)=>{if(c.disabled)return;c.selected?c.selected=!1:(n.values.forEach(t=>t.selected=!1),c.selected=!0),y();const o=f().filter(t=>t);if(o.length===_.goods.specs.length){const t=o.join(d),g=m[t][0];i("selChange",g)}else i("selChange","")},r=()=>{const n={};return _.goods.skus.filter(o=>o.inventory).forEach(o=>{const t=o.specs.map($=>$.valueName);Se(t).forEach($=>{const k=$.join(d);n[k]?n[k].push(o.id):n[k]=[o.id]})}),n},y=()=>{const n=f();_.goods.specs.forEach((c,o)=>{c.values.forEach(t=>{const g=[...n];g[o]=t.name,g.filter(k=>k).join(d)in m?t.disabled=!1:t.disabled=!0})})},f=()=>{const n=[];return _.goods.specs.forEach((c,o)=>{const t=c.values.find(g=>g.selected);n[o]=t?t.name:""}),n},I=()=>{var c;if(!_.skuId)return;const n=(c=_.goods.skus.find(o=>o.id===_.skuId))==null?void 0:c.specs;!n||_.goods.specs.forEach((o,t)=>{const g=n[t].valueName,$=o.values.find(k=>k.name===g);$.selected=!0})},m=r();return I(),y(),(n,c)=>(l(),u("div",Ie,[(l(!0),u(C,null,F(a.goods.specs,o=>(l(),u("dl",{key:o.name},[e("dt",null,h(o.name),1),e("dd",null,[(l(!0),u(C,null,F(o.values,t=>(l(),u(C,{key:t.name},[t.picture?(l(),u("img",{key:0,class:G({selected:t.selected,disabled:t.disabled}),src:t.picture,title:t.name,alt:"",onClick:g=>s(o,t)},null,10,Ee)):(l(),u("span",{key:1,class:G({selected:t.selected,disabled:t.disabled}),onClick:g=>s(o,t)},h(t.name),11,De))],64))),128))])]))),128))]))}});const Fe=S(Be,[["__scopeId","data-v-f5b556e5"]]),Ne=a=>(O("data-v-e90031a9"),a=a(),R(),a),we={class:"goods-tabs"},Ge=Ne(()=>e("nav",null,[e("a",null,"\u5546\u54C1\u8BE6\u60C5")],-1)),Xe={class:"goods-detail"},Ae={class:"attrs"},Me={class:"dt"},Pe={class:"dd"},je=x({__name:"goods-detali",props:{goods:{type:Object,default:()=>({})}},setup(a){return(i,_)=>{const d=U("lazy");return l(),u("div",we,[Ge,e("div",Xe,[e("ul",Ae,[(l(!0),u(C,null,F(a.goods.details.properties,s=>(l(),u("li",{key:s.value},[e("span",Me,h(s.name),1),e("span",Pe,h(s.value),1)]))),128))]),(l(!0),u(C,null,F(a.goods.details.pictures,s=>w((l(),u("img",{key:s,alt:""})),[[d,s]])),128))])])}}});const ze=S(je,[["__scopeId","data-v-e90031a9"]]),Oe={class:"goods-hot"},Re={class:"goods-list"},Le=x({__name:"goods-hot",props:{type:{type:Number,default:1}},setup(a){const i=a,_={1:"24\u5C0F\u65F6\u70ED\u9500\u699C",2:"\u5468\u70ED\u9500\u699C",3:"\u603B\u70ED\u9500\u699C"},d="/goods/hot",r=L().params.id,y=B([]);return q(async()=>{const f=await J.get(d,{params:{id:r,type:i.type}});y.value=f.data.result}),(f,I)=>(l(),u("div",Oe,[e("h3",null,h(_[i.type]),1),e("div",Re,[(l(!0),u(C,null,F(y.value,(m,n)=>(l(),X(W,{goods:m,key:n},null,8,["goods"]))),128))])]))}});const N=S(Le,[["__scopeId","data-v-91be498c"]]),Te={class:"xtx-goods-page"},Ve={class:"container"},He=b("\u9996\u9875"),Ue={key:2,class:"goods-info"},qe={class:"media"},Je={class:"spec"},Ye=b("\u52A0\u5165\u8D2D\u7269\u8F66"),Ke={key:3,class:"goods-footer"},Qe={class:"goods-article"},We={class:"goods-tabs"},Ze={class:"goods-aside"},es=x({name:"Goods"}),ss=x({...es,setup(a){const{goods:i,cart:_}=Y(),d=L();K(()=>{const m=d.params.id;d.fullPath===`/product/${m}`&&(i.$reset(),i.getGoodsInfo(m))});const{info:s}=Q(i),r=B(""),y=m=>{r.value=m;const n=s.value.skus.find(c=>c.id===m);n&&(s.value.inventory=n.inventory,s.value.price=n.price,s.value.oldPrice=n.oldPrice)},f=B(1),I=()=>{if(!r.value)return z.warning("\u8BF7\u9009\u62E9\u5B8C\u6574\u89C4\u683C");_.addCart({count:f.value,skuId:r.value}),z.success("\u52A0\u5165\u8D2D\u7269\u8F66\u6210\u529F")};return(m,n)=>{const c=D("XtxBreadItem"),o=D("XtxBread"),t=D("XtxSkeleton"),g=D("XtxNumber"),$=D("XtxButton");return l(),u("div",Te,[e("div",Ve,[p(s).categories?(l(),X(o,{key:0},{default:E(()=>[v(c,{to:"/"},{default:E(()=>[He]),_:1}),v(c,{to:`/category/${p(s).categories[1].id}`},{default:E(()=>[b(h(p(s).categories[1].name),1)]),_:1},8,["to"]),v(c,{to:`/category/sub/${p(s).categories[0].id}`},{default:E(()=>[b(h(p(s).categories[0].name),1)]),_:1},8,["to"]),v(c,null,{default:E(()=>[b(h(p(s).name),1)]),_:1})]),_:1})):(l(),X(t,{key:1,fade:"",animated:"",bg:"#515151",width:300,height:24})),p(s).id?(l(),u("div",Ue,[e("div",qe,[v(ce,{images:p(s).mainPictures},null,8,["images"]),v(re)]),e("div",Je,[v(Ce,{goods:p(s)},null,8,["goods"]),v(Fe,{goods:p(s),onSelChange:y},null,8,["goods"]),v(g,{count:f.value,"onUpdate:count":n[0]||(n[0]=k=>f.value=k),max:p(s).inventory,showLabel:""},null,8,["count","max"]),v($,{class:"xtx_btn",type:"primary",onClick:I},{default:E(()=>[Ye]),_:1})])])):j("",!0),p(s).id?(l(),u("div",Ke,[e("div",Qe,[e("div",We,[v(ze,{goods:p(s)},null,8,["goods"])])]),e("div",Ze,[v(N,{type:1}),v(N,{type:2}),v(N,{type:3})])])):j("",!0)])])}}});const ns=S(ss,[["__scopeId","data-v-99a4c307"]]);export{ns as default};
