import{d as b,J as U,a as J,u as j,v as S,o as w,c as y,e as s,t as n,m as _,L as v,f as e,N as p,p as P,j as R,M,_ as N,k as L,B as z,F as O}from"./index.1c068c2f.js";import{u as T,v as Q,a as f,c as W,d as X,L as Y,b as Z}from"./vee-validate.esm.aeecef3b.js";import{u as G}from"./index.e625cd97.js";const H=t=>(P("data-v-cdaf23f1"),t=t(),R(),t),ss={class:"xtx-form"},es={class:"user-info"},os=["src"],ts={class:"xtx-form-item"},us={class:"field"},as=H(()=>s("i",{class:"icon iconfont icon-phone"},null,-1)),ns={class:"error"},cs={class:"xtx-form-item"},ls={class:"field"},is=H(()=>s("i",{class:"icon iconfont icon-code"},null,-1)),rs={class:"error"},ds=H(()=>s("div",{class:"error"},null,-1)),_s=b({name:"CallbackBind"}),vs=b({..._s,setup(t){const m=U();J();const{user:h}=j(),i=S({}),c=QC.Login.check(),r=S("");c&&QC.Login.getMe(async g=>{r.value=g,QC.api("get_user_info").success(u=>{i.value=u.data})});const{validate:C}=T({validationSchema:{mobile:Q.mobile,code:Q.code}}),{value:o,errorMessage:x,validate:d}=f("mobile"),{value:F,errorMessage:B}=f("code"),{time:$,start:E}=G(),V=async()=>{$.value>0||!(await d()).valid||(await h.sendQQBindMsg(o.value),E())},q=async()=>{!(await C()).valid||(M.success("\u767B\u5F55\u6210\u529F"),await h.qqBindLogin(r.value,o.value,F.value),m.push("/"))};return(g,u)=>(w(),y("div",ss,[s("div",es,[s("img",{src:i.value.figureurl_2,alt:""},null,8,os),s("p",null," Hi\uFF0C"+n(i.value.nickname)+" \u6B22\u8FCE\u6765\u5C0F\u5154\u9C9C\uFF0C\u5B8C\u6210\u7ED1\u5B9A\u540E\u53EF\u4EE5QQ\u8D26\u53F7\u4E00\u952E\u767B\u5F55\u54E6~ ",1)]),s("div",ts,[s("div",us,[as,_(s("input",{class:"input","onUpdate:modelValue":u[0]||(u[0]=k=>p(o)?o.value=k:null),type:"text",placeholder:"\u7ED1\u5B9A\u7684\u624B\u673A\u53F7"},null,512),[[v,e(o)]])]),s("div",ns,n(e(x)),1)]),s("div",cs,[s("div",ls,[is,_(s("input",{class:"input","onUpdate:modelValue":u[1]||(u[1]=k=>p(F)?F.value=k:null),type:"text",placeholder:"\u77ED\u4FE1\u9A8C\u8BC1\u7801"},null,512),[[v,e(F)]]),s("span",{class:"code",onClick:V},n(e($)>0?`${e($)}s\u540E\u91CD\u65B0\u53D1\u9001`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),1),s("div",rs,n(e(B)),1)]),ds]),s("a",{href:"javascript:;",class:"submit",onClick:q},"\u7ACB\u5373\u7ED1\u5B9A")]))}});const ps=N(vs,[["__scopeId","data-v-cdaf23f1"]]),D=t=>(P("data-v-92b45cf9"),t=t(),R(),t),fs={class:"xtx-form"},ms={class:"xtx-form-item"},hs={class:"field"},Cs=D(()=>s("i",{class:"icon iconfont icon-user"},null,-1)),Fs={class:"error"},Bs={class:"xtx-form-item"},gs={class:"field"},bs=D(()=>s("i",{class:"icon iconfont icon-phone"},null,-1)),xs={class:"error"},$s={class:"xtx-form-item"},Es={class:"field"},ks=D(()=>s("i",{class:"icon iconfont icon-code"},null,-1)),ws={class:"error"},ys={class:"xtx-form-item"},Ds={class:"field"},As=D(()=>s("i",{class:"icon iconfont icon-lock"},null,-1)),Ls={class:"error"},Ms={class:"xtx-form-item"},Qs={class:"field"},Is=D(()=>s("i",{class:"icon iconfont icon-lock"},null,-1)),Vs={class:"error"},qs=b({name:"CallbackPatch"}),Ss=b({...qs,setup(t){const{user:m}=j(),h=U();Q.isAgree=()=>!0;let i="";QC.Login.check()&&QC.Login.getMe(A=>{i=A}),T({validationSchema:Q});const{errorMessage:c,value:r}=f("account"),{errorMessage:C,value:o}=f("password"),{errorMessage:x,value:d}=f("mobile"),{errorMessage:F,value:B}=f("code"),{errorMessage:$,value:E}=f("repassword"),V=W(),q=async()=>{!(await V()).valid||(await m.qqPatchLogin({openId:i,mobile:d.value,code:B.value,account:r.value,password:o.value}),M.success("\u6CE8\u518C\u6210\u529F"),h.push("/"))},g=X("mobile"),{time:u,start:k}=G(60),K=async()=>{u.value>0||!(await g()).valid||(await m.sendQQPathMsg(d.value),M.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F"),k())};return(A,a)=>(w(),y("div",fs,[s("div",ms,[s("div",hs,[Cs,_(s("input",{class:"input","onUpdate:modelValue":a[0]||(a[0]=l=>p(r)?r.value=l:null),type:"text",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"},null,512),[[v,e(r)]])]),s("div",Fs,n(e(c)),1)]),s("div",Bs,[s("div",gs,[bs,_(s("input",{class:"input","onUpdate:modelValue":a[1]||(a[1]=l=>p(d)?d.value=l:null),type:"text",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,512),[[v,e(d)]])]),s("div",xs,n(e(x)),1)]),s("div",$s,[s("div",Es,[ks,_(s("input",{class:"input","onUpdate:modelValue":a[2]||(a[2]=l=>p(B)?B.value=l:null),type:"text",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,512),[[v,e(B)]]),s("span",{class:"code",onClick:K},n(e(u)>0?`${e(u)}s\u540E\u53D1\u9001`:"\u53D1\u9001\u9A8C\u8BC1\u7801"),1)]),s("div",ws,n(e(F)),1)]),s("div",ys,[s("div",Ds,[As,_(s("input",{class:"input","onUpdate:modelValue":a[3]||(a[3]=l=>p(o)?o.value=l:null),type:"password",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,512),[[v,e(o)]])]),s("div",Ls,n(e(C)),1)]),s("div",Ms,[s("div",Qs,[Is,_(s("input",{class:"input","onUpdate:modelValue":a[4]||(a[4]=l=>p(E)?E.value=l:null),type:"password",placeholder:"\u8BF7\u786E\u8BA4\u5BC6\u7801"},null,512),[[v,e(E)]])]),s("div",Vs,n(e($)),1)]),s("a",{href:"javascript:;",class:"submit",onClick:q},"\u7ACB\u5373\u63D0\u4EA4")]))}});const Us=N(Ss,[["__scopeId","data-v-92b45cf9"]]),I=t=>(P("data-v-4bf7f296"),t=t(),R(),t),js={class:"container"},Ps={class:"tab"},Rs=I(()=>s("i",{class:"iconfont icon-bind"},null,-1)),Ns=I(()=>s("span",null,"\u5DF2\u6709\u5C0F\u5154\u9C9C\u8D26\u53F7\uFF0C\u8BF7\u7ED1\u5B9A\u624B\u673A",-1)),Hs=[Rs,Ns],zs=I(()=>s("i",{class:"iconfont icon-edit"},null,-1)),Js=I(()=>s("span",null,"\u6CA1\u6709\u5C0F\u5154\u9C9C\u8D26\u53F7\uFF0C\u8BF7\u5B8C\u5584\u8D44\u6599",-1)),Ts=[zs,Js],Gs={key:0,class:"tab-content"},Ks={key:1,class:"tab-content"},Os=b({name:"LoginCallback"}),Ws=b({...Os,setup(t){const{user:m}=j(),h=U(),i=J(),c=S(!0);return QC.Login.check()&&QC.Login.getMe(async C=>{await m.qqLogin(C),M.success("\u767B\u5F55\u6210\u529F");const o=i.query.redirectUrl||"/";h.push(o)}),(C,o)=>(w(),y(O,null,[L(Y),s("section",js,[s("nav",Ps,[s("a",{class:z({active:c.value}),href:"javascript:;",onClick:o[0]||(o[0]=x=>c.value=!0)},Hs,2),s("a",{class:z({active:!c.value}),href:"javascript:;",onClick:o[1]||(o[1]=x=>c.value=!1)},Ts,2)]),c.value?(w(),y("div",Gs,[L(ps)])):(w(),y("div",Ks,[L(Us)]))]),L(Z)],64))}});const se=N(Ws,[["__scopeId","data-v-4bf7f296"]]);export{se as default};
