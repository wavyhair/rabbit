import{d as k,u as X,v as b,K as V,r as E,o as p,c as F,e as u,f as r,F as w,l as o,t as d,k as a,h as n,G as L,a6 as M,m as C,L as D,i as S,B as R,p as N,j as P,M as B,_ as U,J as q,n as z,q as G,D as J}from"./index.1c068c2f.js";const _=h=>(N("data-v-4df3f7e4"),h=h(),P(),h),K={class:"checkout-address"},H={class:"text"},O={key:0,class:"none"},Q=_(()=>u("span",null,[o("\u6536"),u("i"),o("\u8D27"),u("i"),o("\u4EBA\uFF1A")],-1)),W=_(()=>u("span",null,"\u8054\u7CFB\u65B9\u5F0F\uFF1A",-1)),Y=_(()=>u("span",null,"\u6536\u8D27\u5730\u5740\uFF1A",-1)),Z={class:"action"},uu=o("\u5207\u6362\u5730\u5740"),su=o("\u6DFB\u52A0\u5730\u5740"),tu={class:"address-edit"},eu={class:"xtx-form"},ou={class:"xtx-form-item"},lu=_(()=>u("div",{class:"label"},"\u6536\u8D27\u4EBA\uFF1A",-1)),au={class:"field"},du={class:"xtx-form-item"},nu=_(()=>u("div",{class:"label"},"\u624B\u673A\u53F7\uFF1A",-1)),cu={class:"field"},iu={class:"xtx-form-item"},_u=_(()=>u("div",{class:"label"},"\u5730\u533A\uFF1A",-1)),ru={class:"field"},vu={class:"xtx-form-item"},hu=_(()=>u("div",{class:"label"},"\u8BE6\u7EC6\u5730\u5740\uFF1A",-1)),pu={class:"field"},Fu={class:"xtx-form-item"},fu=_(()=>u("div",{class:"label"},"\u90AE\u653F\u7F16\u7801\uFF1A",-1)),mu={class:"field"},Au={class:"xtx-form-item"},xu=_(()=>u("div",{class:"label"},"\u5730\u5740\u6807\u7B7E\uFF1A",-1)),Cu={class:"field"},Du={class:"xtx-form-item"},Eu=_(()=>u("div",{class:"label"},"\u9ED8\u8BA4\u5730\u5740\uFF1A",-1)),yu={class:"field"},bu=o("\u53D6\u6D88"),Bu=o("\u786E\u8BA4"),ku=["onClick"],gu=_(()=>u("span",null,[o("\u6536"),u("i"),o("\u8D27"),u("i"),o("\u4EBA\uFF1A")],-1)),$u=_(()=>u("span",null,"\u8054\u7CFB\u65B9\u5F0F\uFF1A",-1)),wu=_(()=>u("span",null,"\u6536\u8D27\u5730\u5740\uFF1A",-1)),Iu=o(" \u53D6\u6D88 "),Vu=o("\u786E\u8BA4"),Xu=k({name:"CheckoutAddress"}),Lu=k({...Xu,setup(h){const{checkout:c}=X(),l=b(!1),e=b({receiver:"",contact:"",provinceCode:"",cityCode:"",countyCode:"",address:"",postalCode:"",addressTags:"",isDefault:1,fullLocation:""}),g=i=>{e.value.provinceCode=i.provinceCode,e.value.cityCode=i.cityCode,e.value.countyCode=i.countyCode,e.value.fullLocation=i.provinceName+" "+i.cityName+" "+i.countyName},y=async()=>{e.value.id?await c.updateAddress(e.value):await c.addAddress(e.value),B.success("\u64CD\u4F5C\u6210\u529F"),l.value=!1};V(l,i=>{i||(e.value={receiver:"",contact:"",provinceCode:"",cityCode:"",countyCode:"",address:"",postalCode:"",addressTags:"",isDefault:1,fullLocation:""})});const x=()=>{l.value=!0,c.showAddress&&(e.value={...c.showAddress})},v=b(!1),f=b();V(v,i=>{i&&(f.value=c.showAddress)});const $=async()=>{f.value&&(await c.updateAddress({...f.value,isDefault:0}),B.success("\u4FEE\u6539\u5730\u5740\u6210\u529F"),v.value=!1)};return(i,s)=>{const A=L,j=E("XtxCity"),T=E("XtxSwitch"),I=M;return p(),F("div",K,[u("div",H,[r(c).showAddress?(p(),F(w,{key:1},[u("ul",null,[u("li",null,[Q,o(d(r(c).showAddress.receiver),1)]),u("li",null,[W,o(d(r(c).showAddress.contact),1)]),u("li",null,[Y,o(d(r(c).showAddress.fullLocation+" "+r(c).showAddress.address),1)])]),u("a",{href:"javascript:;",onClick:x},"\u4FEE\u6539\u5730\u5740")],64)):(p(),F("div",O," \u60A8\u9700\u8981\u5148\u6DFB\u52A0\u6536\u8D27\u5730\u5740\u624D\u53EF\u63D0\u4EA4\u8BA2\u5355\u3002 "))]),u("div",Z,[a(A,{class:"btn",onClick:s[0]||(s[0]=t=>v.value=!0)},{default:n(()=>[uu]),_:1}),a(A,{class:"btn",onClick:s[1]||(s[1]=t=>l.value=!0)},{default:n(()=>[su]),_:1})]),a(I,{title:"\u6DFB\u52A0\u6536\u8D27\u5730\u5740",modelValue:l.value,"onUpdate:modelValue":s[9]||(s[9]=t=>l.value=t)},{footer:n(()=>[a(A,{type:"gray",style:{"margin-right":"20px"},onClick:s[8]||(s[8]=t=>l.value=!1)},{default:n(()=>[bu]),_:1}),a(A,{type:"primary",onClick:y},{default:n(()=>[Bu]),_:1})]),default:n(()=>[u("div",tu,[u("div",eu,[u("div",ou,[lu,u("div",au,[C(u("input",{class:"input","onUpdate:modelValue":s[2]||(s[2]=t=>e.value.receiver=t),placeholder:"\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA"},null,512),[[D,e.value.receiver]])])]),u("div",du,[nu,u("div",cu,[C(u("input",{class:"input","onUpdate:modelValue":s[3]||(s[3]=t=>e.value.contact=t),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,512),[[D,e.value.contact]])])]),u("div",iu,[_u,u("div",ru,[a(j,{"user-address":e.value.fullLocation,onChangeCity:g},null,8,["user-address"])])]),u("div",vu,[hu,u("div",pu,[C(u("input",{class:"input","onUpdate:modelValue":s[4]||(s[4]=t=>e.value.address=t),placeholder:"\u8BF7\u8F93\u5165\u8BE6\u7EC6\u5730\u5740"},null,512),[[D,e.value.address]])])]),u("div",Fu,[fu,u("div",mu,[C(u("input",{class:"input","onUpdate:modelValue":s[5]||(s[5]=t=>e.value.postalCode=t),placeholder:"\u8BF7\u8F93\u5165\u90AE\u653F\u7F16\u7801"},null,512),[[D,e.value.postalCode]])])]),u("div",Au,[xu,u("div",Cu,[C(u("input",{class:"input","onUpdate:modelValue":s[6]||(s[6]=t=>e.value.addressTags=t),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740\u6807\u7B7E\uFF0C\u9017\u53F7\u5206\u9694"},null,512),[[D,e.value.addressTags]])])]),u("div",Du,[Eu,u("div",yu,[a(T,{modelValue:e.value.isDefault,"onUpdate:modelValue":s[7]||(s[7]=t=>e.value.isDefault=t),"active-value":0,"inactive-value":1},null,8,["modelValue"])])])])])]),_:1},8,["modelValue"]),a(I,{title:"\u5207\u6362\u6536\u8D27\u5730\u5740",modelValue:v.value,"onUpdate:modelValue":s[11]||(s[11]=t=>v.value=t)},{default:n(()=>[(p(!0),F(w,null,S(r(c).checkoutInfo.userAddresses,t=>(p(),F("div",{class:R(["text item",{active:f.value===t}]),key:t.id,onClick:ns=>f.value=t},[u("ul",null,[u("li",null,[gu,o(d(t.receiver),1)]),u("li",null,[$u,o(d(t.contact),1)]),u("li",null,[wu,o(d(t.fullLocation.replace(/ /g,"")+t.address),1)])])],10,ku))),128))]),footer:n(()=>[a(A,{type:"gray",style:{"margin-right":"20px"},onClick:s[10]||(s[10]=t=>v.value=!1)},{default:n(()=>[Iu]),_:1}),a(A,{type:"primary",onClick:$},{default:n(()=>[Vu]),_:1})]),_:1},8,["modelValue"])])}}});const Su=U(Lu,[["__scopeId","data-v-4df3f7e4"]]),m=h=>(N("data-v-b19dec79"),h=h(),P(),h),Nu={key:0,class:"xtx-pay-checkout-page"},Pu={class:"container"},Uu=o("\u9996\u9875"),ju=o("\u8D2D\u7269\u8F66"),Tu=o("\u586B\u5199\u8BA2\u5355"),Mu={class:"wrapper"},Ru=m(()=>u("h3",{class:"box-title"},"\u6536\u8D27\u5730\u5740",-1)),qu={class:"box-body"},zu=m(()=>u("h3",{class:"box-title"},"\u5546\u54C1\u4FE1\u606F",-1)),Gu={class:"box-body"},Ju={class:"goods"},Ku=m(()=>u("thead",null,[u("tr",null,[u("th",{width:"520"},"\u5546\u54C1\u4FE1\u606F"),u("th",{width:"170"},"\u5355\u4EF7"),u("th",{width:"170"},"\u6570\u91CF"),u("th",{width:"170"},"\u5C0F\u8BA1"),u("th",{width:"170"},"\u5B9E\u4ED8")])],-1)),Hu=["src"],Ou={class:"right"},Qu=G('<h3 class="box-title" data-v-b19dec79>\u914D\u9001\u65F6\u95F4</h3><div class="box-body" data-v-b19dec79><a class="my-btn active" href="javascript:;" data-v-b19dec79>\u4E0D\u9650\u9001\u8D27\u65F6\u95F4\uFF1A\u5468\u4E00\u81F3\u5468\u65E5</a><a class="my-btn" href="javascript:;" data-v-b19dec79>\u5DE5\u4F5C\u65E5\u9001\u8D27\uFF1A\u5468\u4E00\u81F3\u5468\u4E94</a><a class="my-btn" href="javascript:;" data-v-b19dec79>\u53CC\u4F11\u65E5\u3001\u5047\u65E5\u9001\u8D27\uFF1A\u5468\u516D\u81F3\u5468\u65E5</a></div><h3 class="box-title" data-v-b19dec79>\u652F\u4ED8\u65B9\u5F0F</h3><div class="box-body" data-v-b19dec79><a class="my-btn active" href="javascript:;" data-v-b19dec79>\u5728\u7EBF\u652F\u4ED8</a><a class="my-btn" href="javascript:;" data-v-b19dec79>\u8D27\u5230\u4ED8\u6B3E</a><span style="color:#999;" data-v-b19dec79>\u8D27\u5230\u4ED8\u6B3E\u9700\u4ED85\u5143\u624B\u7EED\u8D39</span></div><h3 class="box-title" data-v-b19dec79>\u91D1\u989D\u660E\u7EC6</h3>',5),Wu={class:"box-body"},Yu={class:"total"},Zu=m(()=>u("dt",null,"\u5546\u54C1\u4EF6\u6570\uFF1A",-1)),us=m(()=>u("dt",null,"\u5546\u54C1\u603B\u4EF7\uFF1A",-1)),ss=m(()=>u("dt",null,[o("\u8FD0"),u("i"),o("\u8D39\uFF1A")],-1)),ts=m(()=>u("dt",null,"\u5E94\u4ED8\u603B\u989D\uFF1A",-1)),es={class:"price"},os={class:"submit"},ls=o("\u63D0\u4EA4\u8BA2\u5355"),as=k({name:"XtxPayCheckoutPage"}),ds=k({...as,setup(h){const c=q(),{checkout:l,cart:e}=X();l.getCheckoutInfo();const g=async()=>{if(!l.showAddress)return B.warning("\u8BF7\u9009\u62E9\u6536\u8D27\u5730\u5740");const y=await J.post("/member/order",{goods:l.checkoutInfo.goods.map(x=>({skuId:x.skuId,count:x.count})),addressId:l.showAddress.id});B.success("\u4E0B\u5355\u6210\u529F"),e.getCartList(),c.replace("/member/pay?id="+y.data.result.id)};return(y,x)=>{const v=E("XtxBreadItem"),f=E("XtxBread"),$=E("RouterLink"),i=L;return r(l).checkoutInfo.goods?(p(),F("div",Nu,[u("div",Pu,[a(f,null,{default:n(()=>[a(v,{to:"/"},{default:n(()=>[Uu]),_:1}),a(v,{to:"/cart"},{default:n(()=>[ju]),_:1}),a(v,null,{default:n(()=>[Tu]),_:1})]),_:1}),u("div",Mu,[Ru,u("div",qu,[a(Su)]),zu,u("div",Gu,[u("table",Ju,[Ku,u("tbody",null,[(p(!0),F(w,null,S(r(l).checkoutInfo.goods,s=>(p(),F("tr",{key:s.skuId},[u("td",null,[a($,{to:`/goods/${s.id}`,class:"info"},{default:n(()=>[u("img",{src:s.picture,alt:""},null,8,Hu),u("div",Ou,[u("p",null,d(s.name),1),u("p",null,d(s.attrsText),1)])]),_:2},1032,["to"])]),u("td",null,"\xA5"+d(s.price),1),u("td",null,d(s.count),1),u("td",null,"\xA5"+d(s.totalPrice),1),u("td",null,"\xA5"+d(s.totalPayPrice),1)]))),128))])])]),Qu,u("div",Wu,[u("div",Yu,[u("dl",null,[Zu,u("dd",null,d(r(l).checkoutInfo.summary.goodsCount)+"\u4EF6",1)]),u("dl",null,[us,u("dd",null,"\xA5"+d(r(l).checkoutInfo.summary.totalPrice),1)]),u("dl",null,[ss,u("dd",null,"\xA5"+d(r(l).checkoutInfo.summary.postFee),1)]),u("dl",null,[ts,u("dd",es," \xA5"+d(r(l).checkoutInfo.summary.totalPayPrice),1)])])]),u("div",os,[a(i,{type:"primary",onClick:g},{default:n(()=>[ls]),_:1})])])])])):z("",!0)}}});const is=U(ds,[["__scopeId","data-v-b19dec79"]]);export{is as default};
